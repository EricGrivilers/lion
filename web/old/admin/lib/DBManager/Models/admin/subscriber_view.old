<?php

	class subscriber_view extends SQLTable {
		function subscriber_view(&$Con) {
			$this->involvedTables = array('dm_sendings','dm_tracking','dm_mailings','dm_newsletters','dm_links');
			$this->_defaultFields = "dm_sendings.id AS id, dm_sendings.sent, dm_sendings.sent_date, dm_sendings.failed, dm_sendings.failed_date, dm_tracking.date AS trackdate, dm_tracking.id AS trackid, dm_tracking.tracking_type, dm_mailings.descr, dm_newsletters.title as newstitle, dm_links.url";
			parent::SQLTable($Con,"dm_sendings","dm_sendings LEFT JOIN dm_tracking ON dm_sendings.subscriber_id=dm_tracking.subscriber_id AND dm_sendings.mailing_id=dm_tracking.mailing_id LEFT JOIN dm_links ON dm_tracking.link_id=dm_links.id, dm_mailings, dm_newsletters","id");
		}

		function Find($fieldsList = "",$Cond = "",$Order = "",$Limit="") {
			if(!$fieldsList) $fieldsList=$this->_defaultFields;
			return parent::Find($fieldsList,$Cond,$Order,$Limit);	
		}
	}
?>